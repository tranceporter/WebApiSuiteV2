<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Contact Us</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</head>
<body>
    <style>
        .fileinput-button {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

            .fileinput-button input {
                position: absolute;
                top: 0;
                right: 0;
                margin: 0;
                opacity: 0;
                -ms-filter: 'alpha(opacity=0)';
                font-size: 200px;
                direction: ltr;
                cursor: pointer;
            }
    </style>
    <div class="container">
        <div id="formContainer" class="row">
            <div class="col-md-12">
                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <label for="name" class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="name" name="name" placeholder="First & Last Name" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="email" class="col-sm-2 control-label">Email</label>
                        <div class="col-sm-10">
                            <input type="email" class="form-control" id="email" name="email" placeholder="example@domain.com" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="phone" class="col-sm-2 control-label">Phone</label>
                        <div class="col-sm-10">
                            <input type="tel" class="form-control" id="phone" name="phone" placeholder="0123456789" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="message" class="col-sm-2 control-label">Message</label>
                        <div class="col-sm-10">
                            <textarea class="form-control" rows="6" name="message" id="message" placeholder="Please enter your message"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label"></label>
                        <div class="col-sm-10">
                            <span class="btn btn-success fileinput-button">
                                <i class="fa fa-plus"></i>
                                <span>Select files...</span>
                                <!-- The file input field used as target for the file upload widget -->
                                <input id="fileupload" type="file" multiple="">
                            </span>
                            <div id="files"></div>
                        </div>
                    </div>
                    <div class="form-group" style="margin-right:0;">
                        <div class="pull-right">
                            <input id="send" name="send" type="button" value="Send" class="btn btn-success">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-10 col-sm-offset-2">
                            <span id="response"></span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            var uploadedFiles = [];

            $('#send').click(function () {
                var data = new FormData();

                if (uploadedFiles.length > 0) {
                    for (i = 0; i < uploadedFiles.length; i++) {
                        data.append("file" + i, uploadedFiles[i]);
                    }
                }

                data.append("name", $('#name').val());
                data.append("email", $('#email').val());
                data.append("phone", $('#phone').val());
                data.append("message", $('#message').val());

                $.ajax({
                    type: "POST",
                    url: 'http://tritron.co.uk/api/SendEmailApi/SendEmail',
                    data: data,
                    enctype: 'multipart/form-data',
                    processData: false,  // tell jQuery not to process the data
                    contentType: false,   // tell jQuery not to set contentType
                    success: function (response) {
                        toastr.success('Thank you for contacting us.');
                    },
                    error: function () {
                        toastr.error('Oops. Seems like there was an error contacting us. Please retry.');
                    }
                });
            });

            $('#fileupload').change(function () {
                var files = $(this)[0].files;
                if (files) {
                    $('#files').append('<br/>');
                    $.each(files, function (index, file) {
                        uploadedFiles.push(file);
                        $('<p/>').text(file.name).appendTo('#files');
                    });
                }
            });
        });
    </script>
</body>
</html>
